# Session Travesal Utilities for NAT （STUN）

## 摘要

### Session Travesal Utilities for NAT （STUN）NAT会话穿透程序，是一种用于其他协议处理NAT穿透时的协议工具，其作用是让终端能够获取NAT给他分配的IP地址和端口，也可以用来检测两个中断之间是否联通。同时也可以在两个NAT之间扮演维持活跃绑定（NAT bindings）的角色。STUN在NAT上没有任何特殊的要求，可以在现存的大多数NAT上工作。

### STUN本身不是NAT穿透的一个完整的解决方案，更多是在一个NAT穿透的完整解决方案中扮演一个工具的角色例如TURN[RFC 5766]，ICE[RFC 5245]。这是与前一个STUN[RFC 3489]最重大的不同。值得一提的是,RFC 3489的简称虽然也是STUN，但其全名是Simple Traversal of User Datagram Protocol through Network Address Translators NAT的UDP简单穿越，两个并不相同。

## 目录

### 1.介绍
### 2.从RFC3489的演进
### 3.概览
### 4.术语
### 5.定义
### 6. STUN消息结构
### 7.基本协议步骤
#### 7.1 组装请求/指示
#### 7.2 发送请求/指示
##### 7.2.1 通过UDP发送
##### 7.2.2 通过TCP/TLS-over-TCP发送
#### 7.3 接收STUN消息
##### 7.3.1 处理请求
###### 7.3.1.1 组装一个成功/错误回复
###### 7.3.1.2 发送成功/错误回复
#### 7.3.2 处理指示
#### 7.3.3 处理成功回复
#### 7.3.4 处理错误回复
### 8.指纹机制
### 9.服务器的DNS查找
### 10.鉴权与消息完整性校验机制
#### 10.1 短期认证机制
##### 10.1.1 组装请求/指示
##### 10.1.2 接收请求/指示
##### 10.1.3 接收回复
#### 10.2 长期认证机制
##### 10.2.1 组装请求
###### 10.2.1.1 第一个请求
###### 10.2.1.2 随后的请求
##### 10.2.2 接收请求
##### 10.2.3 接收回复
### 11.服务器交替机制<font face="微软雅黑" size=6 color=#FF0000 >暂定</font>
### 12.向下兼容RFC3489
#### 12.1 客户端处理的改变
#### 12.2 服务器处理的改变
### 13.服务器基本的行为
### 14.STUN的用法
### 15.STUN属性
#### 15.1 MAPPED-ADDRESS（映射地址）
#### 15.2 XOR-MAPPED-ADDRESS（异或映射地址）
#### 15.3 USERNAME （用户名）
#### 15.4 MESSAGE-INTEGRITY （消息完整性）
#### 15.5 FINGERPRINT （指纹）
#### 15.6 ERROE-CODE （错误码）
#### 15.7 REALM <font face="微软雅黑" size=6 color=#FF0000 >领域？</font>
#### 15.8 NONCE
#### 15.9 UKONWN-ATTRIBUTES (未知属性)
#### 15.10 SOFTWARE （软件）
#### 15.11 ALTERNATE-SERVER （服务器轮流）
### 16.安全考量
#### 16.1 协议面临的攻击
##### 16.1.1 外部攻击
##### 16.1.2 内部攻击
#### 16.2 攻击的影响
##### 16.2.1 攻击类型Ⅰ：对目标DDOS攻击
##### 16.2.2 攻击类型Ⅱ：静默客户端
##### 16.2.3 攻击类型Ⅲ：伪装客户端
##### 16.2.4 攻击类型Ⅳ：偷听
#### 16.3  <font face="微软雅黑" size=6 color=#FF0000 >暂未翻译</font>
### 17.IAB考量
### 18.IANA考量
#### 18.1 STUN方法注册
#### 18.2 STUN属性注册
#### 18.3 STUN错误码注册
#### 18.4 STUN UDP和TCP 端口号
### 19.从RFC3489到RFC5389的改变




## 从RFC3489的演进
